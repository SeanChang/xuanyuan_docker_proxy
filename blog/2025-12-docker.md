# 2025 å¹´ 12 æœˆæœ€æ–° Docker é•œåƒæºåŠ é€Ÿåˆ—è¡¨ä¸ä½¿ç”¨æŒ‡å—

![2025 å¹´ 12 æœˆæœ€æ–° Docker é•œåƒæºåŠ é€Ÿåˆ—è¡¨ä¸ä½¿ç”¨æŒ‡å—](https://img.xuanyuan.dev/docker/blog/docker-12.png)

*åˆ†ç±»: Docker | æ ‡ç­¾: docker,é•œåƒæº,åŠ é€Ÿæº,å›½å†…é•œåƒ | å‘å¸ƒæ—¶é—´: 2025-12-01 02:30:01*

> 2025 å¹´ 12 æœˆæœ€æ–° Docker é•œåƒæºåŠ é€Ÿåˆ—è¡¨ä¸ä½¿ç”¨æŒ‡å—ï¼Œæœ¬æ–‡å†…å®¹ä»…é™å­¦ä¹ ç ”ç©¶ï¼Œè¯·å‹¿è¿è§„ä½¿ç”¨ã€‚å»ºè®®æ”¶è—ï¼Œä»¥ä¾¿è·å–åç»­æ›´æ–°ã€‚

æœ¬æ–‡æ±‡æ€»äº†å½“å‰å¯ç”¨ä¸”ç¨³å®šçš„ Docker é•œåƒè®¿é—®æ”¯æŒåœ°å€ï¼Œè¦†ç›– Dockerã€K8s containerdã€Podman ç­‰ä¸»æµåœºæ™¯ï¼Œé›¶åŸºç¡€ç”¨æˆ·ä¹Ÿèƒ½æŒ‰æ­¥éª¤å®Œæˆé…ç½®ã€‚

âš ï¸ è¯´æ˜ï¼šæœ¬æ–‡å†…å®¹ä»…é™å­¦ä¹ ç ”ç©¶ï¼Œè¯·å‹¿è¿è§„ä½¿ç”¨ã€‚å»ºè®®æ”¶è—ï¼Œä»¥ä¾¿è·å–åç»­æ›´æ–°ã€‚

## 2025å¹´12æœˆå¯ç”¨é•œåƒè®¿é—®æ”¯æŒæº
### 1. è…¾è®¯äº‘é•œåƒ
- åœ°å€ï¼šhttps://mirror.ccs.tencentyun.com
- ä»…æ¨èåœ¨è…¾è®¯äº‘æœåŠ¡å™¨ä¸Šä½¿ç”¨ï¼Œå…¶ä»–ç¯å¢ƒå¯èƒ½æ— æ³•æ­£å¸¸è®¿é—®

### 2. é˜¿é‡Œäº‘é•œåƒ
- åœ°å€ï¼šhttps://xxx.mirror.aliyuncs.comï¼ˆä¸åŒè´¦å·ä¸“å±åœ°å€ä¸åŒï¼‰
- ä»…æ¨èåœ¨é˜¿é‡Œäº‘ ECS ç¯å¢ƒä¸­ä½¿ç”¨ï¼Œéœ€é…åˆè‡ªèº«è´¦å·é…ç½®

### 3. è½©è¾•é•œåƒï¼ˆæ¨èä¼˜å…ˆä½¿ç”¨ï¼‰
- å…è´¹ç‰ˆï¼ˆé€‚åˆå¸¸è§„ç”¨æˆ·ï¼‰
  - åœ°å€ï¼šhttps://docker.xuanyuan.me
  - æ— éœ€ç™»å½•ï¼Œå…è´¹ä½¿ç”¨
  - å¢ƒå†… CDN åŠ é€Ÿï¼Œè®¿é—®ç¨³å®š
  - å…¼å®¹ Linux æ¡Œé¢/æœåŠ¡å™¨/NAS è®¾å¤‡ï¼Œæ”¯æŒ containerdã€Podman ç¯å¢ƒ
  - æä¾›å®˜ç½‘æœç´¢åŠŸèƒ½ï¼Œæ–¹ä¾¿æŸ¥æ‰¾é•œåƒ
- ä¸“ä¸šç‰ˆï¼ˆé€‚åˆå¼€å‘è€…ã€ç§‘ç ”äººå‘˜ã€ä¼ä¸šåŠ NAS ç”¨æˆ·ï¼‰
  - åœ°å€ï¼šhttps://xuanyuan.cloud
  - éœ€ç™»å½•ï¼Œæä¾›ä¸“å±è®¿é—®æ”¯æŒåœ°å€ï¼ˆå¦‚ xxx.xuanyuan.runï¼‰ï¼Œè®¿é—®è¡¨ç°æ›´ç¨³å®š
  - æ”¯æŒ K8sï¼ˆk3s/cri-oï¼‰ã€ç¾¤æ™–/å¨è”é€š/æç©ºé—´ NAS ç­‰ç‰¹æ®Šç¯å¢ƒ
  - æä¾›ä¼ä¸šçº§æ”¯æŒã€å”®åæœåŠ¡åŠå®šåˆ¶åŒ–é…ç½®æ–¹æ¡ˆ

## ä¸€é”®å®‰è£…ä¸é…ç½®é•œåƒè®¿é—®æ”¯æŒï¼ˆæ¨èæ–¹æ¡ˆï¼‰
### Linux Docker & Docker Compose ä¸€é”®å®‰è£…é…ç½®è„šæœ¬
è„šæœ¬æ”¯æŒ 13 ç§ä¸»æµ Linux å‘è¡Œç‰ˆï¼ˆå«å›½äº§ç³»ç»Ÿï¼‰ï¼Œå¯ä¸€é”®å®Œæˆ Dockerã€Docker Compose å®‰è£…åŠè½©è¾•é•œåƒè®¿é—®æ”¯æŒé…ç½®ï¼Œæ— éœ€æ‰‹åŠ¨æ“ä½œã€‚

#### æ‰§è¡Œå‘½ä»¤
```bash
bash <(wget -qO- https://xuanyuan.cloud/docker.sh)
```

#### è„šæœ¬ç‰¹æ€§ä¸ä¼˜åŠ¿
- æ”¯æŒ 13 ç§å‘è¡Œç‰ˆï¼šè¦†ç›– openEulerã€OpenCloudOSã€Anolis OSã€Alinuxã€Kylin Linux ç­‰å›½äº§ç³»ç»Ÿï¼Œä»¥åŠ Fedoraã€Rocky Linuxã€Ubuntuã€Debianã€CentOS ç­‰ä¸»æµå‘è¡Œç‰ˆ
- å›½äº§ç³»ç»Ÿæ·±åº¦é€‚é…ï¼šè‡ªåŠ¨è¯†åˆ«å›½äº§æ“ä½œç³»ç»Ÿç‰ˆæœ¬ï¼Œæä¾›æœ€ä¼˜é…ç½®æ–¹æ¡ˆ
- å¤šæºæ™ºèƒ½åˆ‡æ¢ï¼šå†…ç½®é˜¿é‡Œäº‘ã€è…¾è®¯äº‘ã€åä¸ºäº‘ã€ä¸­ç§‘å¤§ã€æ¸…åç­‰ 6+ å›½å†…é•œåƒæºï¼Œè‡ªåŠ¨é€‰æ‹©æœ€å¿«èŠ‚ç‚¹
- è€ç‰ˆæœ¬å…¼å®¹ï¼šæ”¯æŒ Ubuntu 16.04ã€Debian 9/10 ç­‰è¿‡æœŸç³»ç»Ÿï¼Œè‡ªåŠ¨é€‚é…å…¼å®¹å®‰è£…æ–¹æ¡ˆ
- åŒé‡å®‰è£…ä¿éšœï¼šåŒ…ç®¡ç†å™¨å®‰è£…å¤±è´¥æ—¶ï¼Œè‡ªåŠ¨åˆ‡æ¢åˆ°äºŒè¿›åˆ¶å®‰è£…ï¼Œç¡®ä¿å®‰è£…æˆåŠŸ
- è·¨ç³»ç»Ÿæç¤ºï¼šæ£€æµ‹åˆ° macOS æˆ– Windows ç³»ç»Ÿæ—¶ï¼Œè‡ªåŠ¨æä¾› Docker Desktop å®‰è£…æŒ‡å¼•
- å¼€æºé€æ˜ï¼šè„šæœ¬å·²åœ¨ GitHub å¼€æºï¼Œå¯æŸ¥çœ‹æºç ç¡®è®¤å®‰å…¨æ€§

#### æ”¯æŒçš„æ“ä½œç³»ç»Ÿè¯¦æƒ…
| åˆ†ç±» | æ“ä½œç³»ç»Ÿ | ç‰ˆæœ¬ | æ”¯æŒçŠ¶æ€ | è¯´æ˜ |
|------|----------|------|----------|------|
| å›½äº§æ“ä½œç³»ç»Ÿ | openEuler (æ¬§æ‹‰) | 20.03+, 22.03+, 24.03+ | âœ… | åä¸ºå¼€æºï¼Œå…¼å®¹ CentOS |
|  | OpenCloudOS | 9.x | âœ… | è…¾è®¯å¼€æºï¼Œå…¼å®¹ CentOS 9 |
|  | Anolis OS (é¾™èœ¥) | 7.x, 8.x | âœ… | é˜¿é‡Œäº‘æ”¯æŒï¼Œå…¼å®¹ RHEL |
|  | Alinux (é˜¿é‡Œäº‘) | 2.x, 3.x | âœ… | é˜¿é‡Œäº‘ ECS é»˜è®¤ç³»ç»Ÿ |
|  | Kylin Linux (é“¶æ²³éº’éºŸ) | V10 | âœ… | å›½äº§ç³»ç»Ÿï¼Œå…¼å®¹ RHEL |
| CentOS æ›¿ä»£å“ | Rocky Linux | 8.x, 9.x | âœ… | 10å¹´æ”¯æŒå‘¨æœŸï¼Œå…¼å®¹ RHEL |
|  | AlmaLinux | 8.x, 9.x | âœ… | 10å¹´æ”¯æŒå‘¨æœŸï¼Œå…¼å®¹ RHEL |
| åˆ›æ–°å‘è¡Œç‰ˆ | Fedora | 34+ | âœ… | Red Hat ä¸Šæ¸¸ï¼Œå«æœ€æ–°ç‰¹æ€§ |
| ä¼ ç»Ÿå‘è¡Œç‰ˆ | Ubuntu | 16.04+ | âœ… | å«è€ç‰ˆæœ¬ç‰¹æ®Šå…¼å®¹å¤„ç† |
|  | Debian | 9+ | âœ… | å«è€ç‰ˆæœ¬ç‰¹æ®Šå…¼å®¹å¤„ç† |
|  | CentOS | 7, 8, 9 | âœ… | åŒ…å« Stream ç‰ˆæœ¬ |
|  | RHEL | 7, 8, 9 | âœ… | Red Hat ä¼ä¸šçº§å‘è¡Œç‰ˆ |
|  | Oracle Linux | 7, 8, 9 | âœ… | Oracle ä¼ä¸šçº§å‘è¡Œç‰ˆ |

ğŸ’¡ æç¤ºï¼šè„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹ç³»ç»Ÿç±»å‹å’Œç‰ˆæœ¬ï¼Œæ— éœ€æ‰‹åŠ¨é€‰æ‹©å®‰è£…æ–¹æ¡ˆï¼Œå…¨ç¨‹è‡ªåŠ¨åŒ–å®Œæˆã€‚

## æ‰‹åŠ¨é…ç½®é•œåƒè®¿é—®æ”¯æŒï¼ˆå·²å®‰è£… Docker ç¯å¢ƒï¼‰
### Linux ç³»ç»Ÿ
1. åˆ›å»º Docker é…ç½®ç›®å½•å¹¶å†™å…¥åŠ é€Ÿé…ç½®
```bash
# åˆ›å»ºé…ç½®ç›®å½•
sudo mkdir -p /etc/docker

# å†™å…¥åŠ é€Ÿé…ç½®
cat <<EOF | sudo tee /etc/docker/daemon.json
{
  "registry-mirrors": ["https://docker.xuanyuan.me"]
}
EOF

# é‡æ–°åŠ è½½é…ç½®å¹¶é‡å¯ Docker
sudo systemctl daemon-reload
sudo systemctl restart docker
```
2. éªŒè¯é…ç½®ï¼šæ‰§è¡Œ `docker info | grep "Registry Mirrors" -A 3`ï¼Œè¾“å‡ºåŒ…å« `https://docker.xuanyuan.me` å³é…ç½®æˆåŠŸ

### macOSï¼ˆDocker Desktopï¼‰
#### åŸºç¡€é…ç½®ï¼ˆå…è´¹åŠ é€Ÿæºï¼‰
1. ç‚¹å‡»èœå•æ  Docker å›¾æ ‡ â†’ Preferences
2. æ‰¾åˆ° Daemon â†’ Registry mirrors
3. æ·»åŠ åœ°å€ `https://docker.xuanyuan.me`
4. ç‚¹å‡» Apply & Restart å®Œæˆé‡å¯

#### è¡¥å……é…ç½®ï¼ˆè½©è¾•ä¸“ä¸šç‰ˆä¸“å±åœ°å€ï¼‰
1. è¿›å…¥ Docker Desktop è®¾ç½® â†’ å·¦ä¾§ Docker Engine
2. æŒ‰ä»¥ä¸‹æ ¼å¼ä¿®æ”¹é…ç½®ï¼ˆæ›¿æ¢ xxx.xuanyuan.run ä¸ºä¸“å±åœ°å€ï¼‰
```json
{
  "insecure-registries": ["xxx.xuanyuan.run"],
  "registry-mirrors": ["https://xxx.xuanyuan.run", "https://docker.xuanyuan.me"]
}
```
3. ç‚¹å‡» Apply & Restartï¼Œé€šè¿‡ `docker info` éªŒè¯ç”Ÿæ•ˆ

### Windowsï¼ˆDocker Desktopï¼‰
#### åŸºç¡€é…ç½®ï¼ˆå…è´¹åŠ é€Ÿæºï¼‰
1. å³é”®ç‚¹å‡»å³ä¸‹è§’ Docker å›¾æ ‡ â†’ Settings
2. æ‰“å¼€ Docker Daemon é…ç½®ï¼Œä¿®æ”¹ JSON å†…å®¹
```json
{
  "registry-mirrors": ["https://docker.xuanyuan.me"]
}
```
3. ç‚¹å‡» Applyï¼Œç­‰å¾… Docker é‡å¯å®Œæˆ

#### è¡¥å……é…ç½®ï¼ˆè½©è¾•ä¸“ä¸šç‰ˆä¸“å±åœ°å€ï¼‰
1. è¿›å…¥ Docker Desktop â†’ Settings â†’ Docker Engine
2. æŒ‰ä»¥ä¸‹æ ¼å¼ä¿®æ”¹é…ç½®ï¼ˆæ›¿æ¢ xxx.xuanyuan.run ä¸ºä¸“å±åœ°å€ï¼‰
```json
{
  "insecure-registries": ["xxx.xuanyuan.run"],
  "registry-mirrors": ["https://xxx.xuanyuan.run"]
}
```
3. ç‚¹å‡» Apply é‡å¯ï¼Œé€šè¿‡ `docker info` æŸ¥çœ‹ Registry Mirrors ç¡®è®¤ç”Ÿæ•ˆ

## å…¶ä»–å®¹å™¨ç¯å¢ƒåŠ é€Ÿé…ç½®
### K8s containerd é•œåƒè®¿é—®æ”¯æŒé…ç½®
é€‚ç”¨äº Kubernetesï¼ˆk3s/cri-oï¼‰æˆ–è‡ªå»º containerd ç¯å¢ƒï¼Œæå‡é•œåƒæ‹‰å–è®¿é—®è¡¨ç°ã€‚

#### é€‚ç”¨ç‰ˆæœ¬
| containerd ç‰ˆæœ¬ | æ˜¯å¦æ”¯æŒ |
|----------------|----------|
| < 1.4 | ä¸æ”¯æŒï¼ˆè¯­æ³•å·®å¼‚ï¼‰ |
| 1.4 ~ 1.7.x | å®Œå…¨æ”¯æŒ |
| â‰¥ 1.7.x | æ¨èä½¿ç”¨ |

æŸ¥çœ‹å½“å‰ç‰ˆæœ¬ï¼š`containerd --version`

#### é…ç½®æ­¥éª¤
1. åˆå§‹åŒ–é…ç½®æ–‡ä»¶ï¼ˆè‹¥æœªç”Ÿæˆï¼‰
```bash
containerd config default > /etc/containerd/config.toml
```
2. ç¼–è¾‘é…ç½®æ–‡ä»¶ï¼š`sudo nano /etc/containerd/config.toml`
3. åœ¨ `plugins."io.containerd.grpc.v1.cri".registry.mirrors` èŠ‚ç‚¹ä¸‹æ·»åŠ ä»¥ä¸‹å†…å®¹ï¼ˆæ›¿æ¢ xxx.xuanyuan.run ä¸ºä¸“å±åœ°å€ï¼‰
```toml
[plugins."io.containerd.grpc.v1.cri".registry]
  [plugins."io.containerd.grpc.v1.cri".registry.mirrors]
    # Docker Hub åŠ é€Ÿ
    [plugins."io.containerd.grpc.v1.cri".registry.mirrors."docker.io"]
      endpoint = ["https://xxx.xuanyuan.run"]
    # K8s æ—§ç‰ˆé•œåƒä»“åº“ï¼ˆk8s.gcr.ioï¼‰
    [plugins."io.containerd.grpc.v1.cri".registry.mirrors."k8s.gcr.io"]
      endpoint = ["https://xxx-k8s.xuanyuan.run"]
    # GCR é•œåƒä»“åº“
    [plugins."io.containerd.grpc.v1.cri".registry.mirrors."gcr.io"]
      endpoint = ["https://xxx-gcr.xuanyuan.run"]
    # GHCR é•œåƒä»“åº“
    [plugins."io.containerd.grpc.v1.cri".registry.mirrors."ghcr.io"]
      endpoint = ["https://xxx-ghcr.xuanyuan.run"]
    # æ–°ç‰ˆ K8s é•œåƒä»“åº“ï¼ˆregistry.k8s.ioï¼‰
    [plugins."io.containerd.grpc.v1.cri".registry.mirrors."registry.k8s.io"]
      endpoint = ["https://xxx.xuanyuan.run"]
```

#### ç”Ÿæ•ˆä¸éªŒè¯
```bash
# é‡å¯ containerd
sudo systemctl restart containerd

# éªŒè¯é…ç½®
grep -A 5 "docker.io" /etc/containerd/config.toml

# æ‹‰å–æµ‹è¯•é•œåƒ
ctr images pull xxx.xuanyuan.run/library/alpine:latest

# K8s ç¯å¢ƒæµ‹è¯•
kubectl run test-pod --image=nginx:latest
kubectl describe pod test-pod | grep "Image:"
```

### Podman é•œåƒè®¿é—®æ”¯æŒé…ç½®
é€‚ç”¨äºæ— å®ˆæŠ¤è¿›ç¨‹çš„è½»é‡åœºæ™¯ï¼Œå…¼å®¹ Docker å‘½ä»¤ä¹ æƒ¯ã€‚

#### é…ç½®æ­¥éª¤
1. æ–°å»ºè‡ªå®šä¹‰é…ç½®æ–‡ä»¶ï¼ˆæ¨èï¼Œé¿å…è¦†ç›–ç³»ç»Ÿé»˜è®¤é…ç½®ï¼‰
```bash
sudo nano /etc/containers/registries.conf.d/custom.conf
```
2. å†™å…¥ä»¥ä¸‹é…ç½®ï¼ˆæ›¿æ¢ xxx.xuanyuan.run ä¸ºä¸“å±åœ°å€ï¼‰
```toml
# é»˜è®¤æœç´¢ Docker Hub
unqualified-search-registries = ['docker.io']

# Docker Hub åŠ é€Ÿ
[[registry]]
prefix = "docker.io"
insecure = true
location = "registry-1.docker.io"
  [[registry.mirror]]
  location = "xxx.xuanyuan.run"

# K8s.gcr.io åŠ é€Ÿ
[[registry]]
prefix = "k8s.gcr.io"
insecure = true
location = "k8s.gcr.io"
  [[registry.mirror]]
  location = "xxx-k8s.xuanyuan.run"

# GCR.io åŠ é€Ÿ
[[registry]]
prefix = "gcr.io"
insecure = true
location = "gcr.io"
  [[registry.mirror]]
  location = "xxx-gcr.xuanyuan.run"

# GHCR.io åŠ é€Ÿ
[[registry]]
prefix = "ghcr.io"
insecure = true
location = "ghcr.io"
  [[registry.mirror]]
  location = "xxx-ghcr.xuanyuan.run"
```
3. ä¿å­˜æ–‡ä»¶ï¼ˆCtrl+O â†’ å›è½¦ â†’ Ctrl+Xï¼‰

#### éªŒè¯ç”Ÿæ•ˆ
```bash
# æ‹‰å–æµ‹è¯•é•œåƒ
podman pull docker.io/library/alpine:latest

# æŸ¥çœ‹é•œåƒæ‹‰å–æ¥æº
podman inspect alpine:latest | grep -i "registry"
```

## é•œåƒæ‹‰å–ä½¿ç”¨ç¤ºä¾‹
### æ‹‰å–å®˜æ–¹é•œåƒ
```bash
# Dockerï¼ˆå…è´¹æºï¼‰
docker pull docker.xuanyuan.me/library/mysql:5.7
docker pull docker.xuanyuan.me/library/nginx:1.25

# Dockerï¼ˆè½©è¾•é•œåƒä¸“ä¸šç‰ˆä¸“å±åœ°å€ï¼‰
docker pull xxx.xuanyuan.run/library/mysql:8.0
docker pull xxx.xuanyuan.run/library/nginx:latest

# Podmanï¼ˆè‡ªåŠ¨èµ°åŠ é€Ÿï¼‰
podman pull mysql:5.7
podman pull nginx:1.25

# containerdï¼ˆæ˜¾å¼æŒ‡å®šè®¿é—®æ”¯æŒåœ°å€ï¼‰
ctr images pull xxx.xuanyuan.run/library/mysql:5.7
ctr images pull xxx-k8s.xuanyuan.run/k8s.gcr.io/pause:3.9
```

### æ‹‰å–ç”¨æˆ·è‡ªå®šä¹‰é•œåƒ
```bash
# Docker æ‹‰å– Docker Hub ç”¨æˆ·é•œåƒ
docker pull xxx.xuanyuan.run/username/my-web-app:v1.0

# Docker æ‹‰å– GHCR ç”¨æˆ·é•œåƒ
docker pull xxx-ghcr.xuanyuan.run/username/my-tool:v2.1

# Podman æ‹‰å– GHCR ç”¨æˆ·é•œåƒ
podman pull ghcr.io/username/my-tool:v2.1

# containerd æ‹‰å– GCR ç”¨æˆ·é•œåƒ
ctr images pull xxx-gcr.xuanyuan.run/google-samples/node-hello:1.0
```

### Docker Compose ä½¿ç”¨ç¤ºä¾‹
é…ç½®å¥½åŠ é€Ÿæºåï¼Œæ— éœ€ä¿®æ”¹ docker-compose.ymlï¼Œè‡ªåŠ¨ä½¿ç”¨åŠ é€Ÿæ‹‰å–é•œåƒã€‚

#### docker-compose.yml ç¤ºä¾‹ï¼ˆNginx + MySQLï¼‰
```yaml
version: "3.8"
services:
  web:
    image: nginx:latest
    ports:
      - "8080:80"
    volumes:
      - ./nginx/conf:/etc/nginx/conf.d
  db:
    image: mysql:8.0
    environment:
      MYSQL_ROOT_PASSWORD: root
      MYSQL_DATABASE: test_db
    volumes:
      - mysql-data:/var/lib/mysql
volumes:
  mysql-data:
```

#### è¿è¡Œä¸åœæ­¢å‘½ä»¤
```bash
# å¯åŠ¨æœåŠ¡ï¼ˆåå°è¿è¡Œï¼‰
docker compose up -d

# æŸ¥çœ‹çŠ¶æ€
docker compose ps

# åœæ­¢æœåŠ¡ï¼ˆä¿ç•™æ•°æ®ï¼‰
docker compose down

# åœæ­¢å¹¶åˆ é™¤æ•°æ®å·ï¼ˆè°¨æ…ä½¿ç”¨ï¼‰
docker compose down -v
```

### containerd å•ç‹¬ä½¿ç”¨ç¤ºä¾‹
```bash
# æ‹‰å–é•œåƒ
ctr images pull xxx.xuanyuan.run/library/nginx:latest

# è¿è¡Œå®¹å™¨
ctr run --rm -t --net-host xxx.xuanyuan.run/library/nginx:latest nginx-test

# æŸ¥çœ‹å®¹å™¨
ctr containers ls

# åœæ­¢å®¹å™¨
ctr tasks stop nginx-test
```

### Podman ä½¿ç”¨ç¤ºä¾‹ï¼ˆå…¼å®¹ Docker å‘½ä»¤ï¼‰
```bash
# è¿è¡Œ Redis å®¹å™¨
podman run -d -p 6379:6379 --name redis-test redis:7.2

# æŸ¥çœ‹å®¹å™¨çŠ¶æ€
podman ps

# è¿›å…¥å®¹å™¨
podman exec -it redis-test redis-cli

# åœæ­¢å¹¶åˆ é™¤å®¹å™¨
podman stop redis-test
podman rm redis-test
```

## å¸¸è§é—®é¢˜ï¼ˆFAQï¼‰
### Q1ï¼šé…ç½®åŠ é€Ÿæºåï¼Œéƒ¨åˆ†é•œåƒä»æ‹‰ä¸ä¸‹æ¥ï¼Ÿ
æ ¸å¿ƒåŸå› æ˜¯ `registry-mirrors` ä»…å¯¹ Docker Hub é•œåƒç”Ÿæ•ˆã€‚è‹¥æ‹‰å– ghcr.ioã€registry.k8s.io ç­‰ç¬¬ä¸‰æ–¹ä»“åº“é•œåƒï¼Œéœ€æŒ‰å¯¹åº”ç¯å¢ƒé…ç½®ä¸“å±åŠ é€Ÿï¼ˆå¦‚ containerd å•ç‹¬é…ç½®å„ä»“åº“ mirrorsï¼ŒPodman åœ¨ registries.conf ä¸­æ·»åŠ å¯¹åº”é•œåƒæºï¼‰ï¼›ä½¿ç”¨è½©è¾•ä¸“ä¸šç‰ˆå¯è·å–å…¨ä»“åº“åŠ é€Ÿæ–¹æ¡ˆï¼Œæˆ–è”ç³»å®¢æœå®šåˆ¶åœ°å€ã€‚

### Q2ï¼šNASï¼ˆç¾¤æ™–ã€å¨è”é€šï¼‰å¦‚ä½•é…ç½®ï¼Ÿ
æ¨èä½¿ç”¨è½©è¾•é•œåƒä¸“ä¸šç‰ˆï¼Œæ­¥éª¤å¦‚ä¸‹ï¼š
1. ç™»å½•è½©è¾•å®˜ç½‘ï¼Œåœ¨ã€ŒNAS é…ç½®ã€ä¸“åŒºé€‰æ‹©å¯¹åº”è®¾å¤‡å‹å·ï¼›
2. æŒ‰æŒ‡å¼•è¿›å…¥ NAS çš„ Docker/containerd é…ç½®ç•Œé¢ï¼ˆç¾¤æ™–éœ€å¼€å¯ SSHï¼Œå¨è”é€šè¿›å…¥å®¹å™¨ Station é«˜çº§è®¾ç½®ï¼‰ï¼›
3. ç²˜è´´ä¸“å±è®¿é—®æ”¯æŒåœ°å€ï¼Œä¿å­˜å¹¶é‡å¯ NAS å®¹å™¨æœåŠ¡ï¼›
4. æ‹‰å– nginx:latest æµ‹è¯•è®¿é—®è¡¨ç°ã€‚

### Q3ï¼šK8s éƒ¨ç½² Pod æç¤ºé•œåƒæ‹‰å–å¤±è´¥ï¼Ÿ
1. æ£€æŸ¥ config.toml æ˜¯å¦é…ç½®äº† Pod æ‰€éœ€é•œåƒçš„ä»“åº“ï¼ˆå¦‚ registry.k8s.ioï¼‰ï¼›
2. é‡å¯ containerd åï¼Œé€šè¿‡ `kubectl describe pod <pod-name>` æŸ¥çœ‹é”™è¯¯æ—¥å¿—ï¼›
3. è‹¥ä¸ºè¯ä¹¦é”™è¯¯ï¼Œå¯åœ¨å¯¹åº”ä»“åº“é…ç½®ä¸‹æ·»åŠ  `tls_config = { insecure_skip_verify = true }`ï¼ˆä»…æµ‹è¯•ç¯å¢ƒä½¿ç”¨ï¼‰ï¼›
4. è‹¥ä¸º endpoint ä¸å¯è¾¾ï¼Œç¡®è®¤è®¿é—®æ”¯æŒåœ°å€æ­£ç¡®æ€§ï¼Œæˆ–è”ç³»è½©è¾•å®¢æœæ’æŸ¥ã€‚

### Q4ï¼šPodman æç¤ºâ€œinsecure registryâ€é”™è¯¯ï¼Ÿ
1. è‹¥è®¿é—®æ”¯æŒåœ°å€ä¸º HTTP åè®®ï¼šç¡®ä¿ registries.conf ä¸­å¯¹åº”ä»“åº“ `insecure = true`ï¼Œå¹¶å¼€æ”¾å¯¹åº”ç«¯å£ï¼›
2. è‹¥ä¸º HTTPS åè®®ï¼šæ£€æŸ¥åœ°å€æ˜¯å¦åŒ…å« https://ï¼Œä¸”æœåŠ¡å™¨è¯ä¹¦æœ‰æ•ˆï¼›è‡ªç­¾è¯ä¹¦éœ€æ”¾å…¥ `/etc/containers/certs.d/xxx.xuanyuan.run/` ç›®å½•ã€‚

### Q5ï¼šä¼ä¸šç¯å¢ƒå¦‚ä½•ä¿éšœç¨³å®šæ€§ï¼Ÿ
1. ä½¿ç”¨è½©è¾•ä¸“ä¸šç‰ˆã€Œä¼ä¸šä¸“å±èŠ‚ç‚¹ã€ï¼Œè·å–ç‹¬ç«‹ IP å’Œå¸¦å®½ï¼›
2. é…ç½®å¤šèŠ‚ç‚¹ fallbackï¼ˆå¦‚ `endpoint = ["https://node1.xxx.xuanyuan.run", "https://node2.xxx.xuanyuan.run"]`ï¼‰ï¼›
3. æ­å»º Harbor æœ¬åœ°é•œåƒç¼“å­˜ï¼ŒåŒæ­¥å¸¸ç”¨é•œåƒï¼›
4. å¼€é€šã€Œä¼ä¸šçº§ç›‘æ§ã€ï¼Œå®æ—¶æŸ¥çœ‹èŠ‚ç‚¹çŠ¶æ€å’Œæ‹‰å–æ—¥å¿—ã€‚

## æ€»ç»“
1. å¸¸è§„ç”¨æˆ·ï¼šä¼˜å…ˆä½¿ç”¨ä¸€é”®å®‰è£…è„šæœ¬ï¼Œæˆ–æ‰‹åŠ¨é…ç½®è½©è¾•å…è´¹åŠ é€Ÿæº `https://docker.xuanyuan.me`ï¼Œæ»¡è¶³æ—¥å¸¸éœ€æ±‚ï¼›
2. ä¸“ä¸š/ä¼ä¸šç”¨æˆ·ï¼šé€‰æ‹©è½©è¾•é•œåƒä¸“ä¸šç‰ˆï¼Œè·å–ä¸“å±åœ°å€ï¼Œæ”¯æŒå…¨ç¯å¢ƒé€‚é…å’Œç¨³å®šå”®åæœåŠ¡ï¼›
3. K8s/é›†ç¾¤ç”¨æˆ·ï¼šé‡ç‚¹é…ç½® containerd çš„å¤šä»“åº“åŠ é€Ÿï¼Œç¡®ä¿é›†ç¾¤éƒ¨ç½²ä¸è¶…æ—¶ï¼›
4. Podman ç”¨æˆ·ï¼šé€šè¿‡ registries.conf é…ç½®åŠ é€Ÿï¼Œé€‚åˆè½»é‡åœºæ™¯ä½¿ç”¨ã€‚

å»ºè®®æ”¶è—æœ¬æ–‡ï¼Œæ¯æœˆä¼šæ›´æ–°é•œåƒæºå¯ç”¨æ€§åŠé…ç½®ç»†èŠ‚ï¼›é‡åˆ°é—®é¢˜å¯æŸ¥çœ‹è½©è¾•é•œåƒå®˜ç½‘ FAQï¼ˆhttps://xuanyuan.cloud/faqï¼‰ï¼Œæˆ–è”ç³»å®˜ç½‘å®¢æœè·å–

